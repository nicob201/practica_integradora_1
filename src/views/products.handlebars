<div class="mx-5 mt-5" id="productLogs">
    <h1>Products:</h1>
</div>

<script>
    // Funcion para renderizar productos
    function renderProducts(product) {
        const productLogs = document.getElementById('productLogs');
        const productElement = document.createElement('div');
        productElement.innerHTML = `<div class="mx-5 my-5">
                                        <p>Title: ${product.title}</p></br>
                                        <p>Description: ${product.description}</p></br>
                                        <p>Price: ${product.price}</p></br>
                                        <p>Code: ${product.code}</p></br>
                                        <p>Status: ${product.status}</p></br>
                                        <p>Stock: ${product.stock}</p></br>
                                    </div>`;
        productLogs.appendChild(productElement);
    }

    // Funcion para cargar productos con fetch
    async function getProducts() {
        try {
            const response = await fetch('/api/products');
            if (response.ok) {
                const products = await response.json();
                products.payload.forEach((product) => {
                    renderProducts(product);
                });
            } else {
                console.error('Error fetching products!')
            }
        } catch (error) {
            console.error('Error fetching products:', error);
        }
    }
    getProducts();
</script>